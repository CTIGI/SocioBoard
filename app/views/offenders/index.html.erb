<%= render partial: "offenders/partials/search" %>
<%= render partial: "offenders/partials/show_results" %>

<table class="table">
  <thead>
    <tr>
      <th>
        <%= sort_link(@q, :unit) %>
      </th>
      <th>
        <%= sort_link(@q, :name) %>
      </th>
      <th>
        <%= sort_link(@q, :age) %>
      </th>
      <th>
        <%= sort_link(@q, :recurrent) %>
      </th>
      <th>
        <%= sort_link(@q, :origin_county) %>
      </th>
      <th>
        <%= sort_link(@q, :article) %>
      </th>
      <th>
        <%= sort_link(@q, :measure_type, t('activerecord.attributes.offender.measures_measure_type')) %>
      </th>
      <th>
        <%= sort_link(@q, :measure_deadline, t('activerecord.attributes.offender.measures_measure_deadline')) %>
      </th>
      <th>
        <%= sort_link(@q, :start_date_measure, t('activerecord.attributes.offender.measures_start_date_measure')) %>
      </th>
      <th>
        <%= sort_link(@q, :end_date_measure, t('activerecord.attributes.offender.measures_end_date_measure')) %>
      </th>
      <th>
        <%= sort_link(@q, :measure_situation, t('activerecord.attributes.offender.measures_measure_situation')) %>
      </th>
    </tr>
  </thead>
  <tbody>
    <% @offenders.each do |offender| %>
      <tr>
        <td>
          <%= truncate_words(offender.unit) %>
        </td>
        <td>
          <%= truncate(offender.name) %>
        </td>
        <td>
          <%= show_field(offender.age) %>
        </td>
        <td>
          <%= show_field(offender.recurrent) %>
        </td>
        <td>
          <%= show_field(offender.origin_county) %>
        </td>
        <td>
          <%= show_field(offender.crimes.pluck(:name).join(", ")) %>
        </td>
        <td>
          <%= measure_data(offender, :measure_type) %>
        </td>
        <td>
          <%= measure_data(offender, :measure_deadline) %>
        </td>
        <td>
          <%= l(measure_data(offender, :start_date_measure).to_date) %>
        </td>
        <td>
          <%= l(measure_data(offender, :end_date_measure).to_date) %>
        </td>
        <td>
          <%= measure_data(offender, :measure_situation) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="text-center">
  <%= paginate @offenders %>
</div>
